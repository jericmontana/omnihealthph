<modal-opener class="hidden popupmodal--thankyou__opener-{{ section.id }}" data-modal="#PopupModal-{{ section.id }}">
    <button id="TYPopup-{{ section.id }}" type="button" aria-haspopup="dialog"></button>
</modal-opener>
<modal-dialog id="PopupModal-{{ section.id }}" class="popupmodal--thankyou">
    <div role="dialog" aria-modal="true" class="popupmodal--thankyou__content" tabindex="-1" style="{% unless settings.ty_bg_image == blank %}background-image: url('{{ settings.ty_bg_image | image_url }}');{% endunless %}
                    {% unless settings.ty_bg_color == blank %}background-color: {{ settings.ty_bg_color }};{% endunless %}
                    background-blend-mode: {{ settings.ty_bg_blend }};">
        <button id="ModalClose-{{ section.id }}" type="button" class="popupmodal--thankyou__toggle" aria-label="{{ 'accessibility.close' | t }}">{% render 'icon-close' %}</button>
        <div class="popupmodal--thankyou__content-info">
            <div class="popupmodal--thankyou__copy">
                
                <div class="popupmodal--thankyou__text center">
                    <h2 class="h1">{{ settings.ty_title }}</h2>

                    <div>
                        {{ settings.ty_richtext }}
                    </div>

                    <p id="popupmodal--thankyou__discount-code-{{ section.id }}" class="popupmodal--thankyou__discount-code h2">{{ settings.ty_discount_code }}</p>
                </div>

                <div class="popupmodal--thankyou__button">

                    <div role="button" class="btn btn--default btn-he--bs btn--round-corner btn--copy" data-targettext="popupmodal--thankyou__discount-code-{{ section.id }}" data-tooltip="âœ”">
                        <span>copy</span>
                    </div>

                    {% render 'button',
                        btn_label: settings.ty_btn_label,
                        btn_link: settings.ty_btn_link,
                        btn_size: "default",
                        hover_effect: "lighten",
                        icon_type: "none",
                        round_corner: true,
                        shadow_effect: true,
                        auto_width: false
                    %}

                </div>
            </div>
        </div>
    </div>
</modal-dialog>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        document.querySelector(`#${localStorage.getItem('activated-ty-modalpopup')}`).click();
    })
</script> 